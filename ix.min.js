!function(a,b){var c="object"==typeof exports&&exports&&("object"==typeof a&&a&&a==a.global&&(window=a),exports);"function"==typeof define&&define.amd?define(["Ix","exports"],function(c,d){return a.Ix=b(a,d,c),a.Ix}):"object"==typeof module&&module&&module.exports==c?module.exports=b(a,module.exports,require("./l2o")):a.Ix=b(a,{},a.Ix)}(this,function(a,b,c){function d(){}function e(a){return a}function f(a,b){return a>b?1:b>a?-1:0}function g(a,b){return a===b}function h(a,b){b||(b=g);for(var c=0,d=this.length;d>c;c++)if(b(a,this[c]))return c;return-1}function i(a,b,c){var d=[],e=a.getEnumerator();try{if(!e.moveNext())throw new Error(p);var f=e.getCurrent(),g=b(f);for(d.push(f);e.moveNext();){var h=e.getCurrent(),i=b(h),j=c(i,g);0===j?d.push(h):j>0&&(d=[h],g=i)}}finally{e.dispose()}return v(d)}function j(a){this.readerCount=a,this.list={},this.length=0}function k(){this.list=[],this.length=0}function l(a,b){return function(){a.apply(b,arguments)}}function m(a,b){var c=this;return new r(function(){var d,e,f=a;return x(function(){if(e||(e=c.getEnumerator()),!e.moveNext())return!1;var a=e.getCurrent();return f=b(f,a),d=f,!0},function(){return d},function(){e&&e.dispose()})})}function n(a){var b=this;return new r(function(){var c,d,e,f=!1;return x(function(){for(d||(d=b.getEnumerator());;){if(!d.moveNext())return!1;var g=d.getCurrent();{if(f)return e=a(e,g),c=e,!0;f=!0,e=g}}},function(){return c},function(){d&&d.dispose()})})}function o(a,b){return new r(function(){var c,d,e;return x(function(){for(g||(g=a.getEnumerator());;){var d,f;try{d=g.moveNext(),f=g.getCurrent()}catch(g){e=b(g);break}return d?(c=f,!0):!1}return e?(g.dispose(),g=e.getEnumerator(),g.moveNext()?(c=g.getCurrent(),!0):!1):void 0},function(){return c},function(){d&&d.dispose()})})}var p="Sequence contains no elements.",q=Array.prototype.slice,r=c.Enumerable,s=r.prototype,t=r.concat,u=r.empty,v=r.fromArray,w=r.repeat,x=c.Enumerator.create;inherits=c.Internals.inherits,s.isEmpty=function(){return!this.any()},s.minBy=function(a,b){return b||(b=f),i(this,a,function(a,c){return-b(a,c)})},s.maxBy=function(a,b){return b||(b=f),i(this,a,b)};var y=function(){function a(a){this.disposed=!1,this.source=a}return inherits(a,r),a.prototype.getEnumerator=function(){if(this.disposed)throw new Error("Object disposed");var a,b=this;return x(function(){return b.source.moveNext()?(a=b.source.getCurrent(),!0):!1},function(){return a})},a.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.source.dispose(),this.source=null)},a}();s.share=function(a){var b=this;return a?new r(function(){return a(b.share()).getEnumerator()}):new y(b.getEnumerator())};var z=j.prototype;z.clear=function(){this.list={},this.length=0},z.get=function(a){if(!this.list[a])throw new Error("Element no longer available in the buffer.");var b=this.list[a];return 0===--b.length&&delete this.list[a],b.value},z.push=function(a){this.list[this.length]={value:a,length:this.readerCount},this.length++},z.done=function(a){for(var b=a;b<this.length;b++)this.get(b);this.readerCount--};var A=function(){function a(a){this.source=a,this.buffer=new j(0),this.disposed=!1,this.stopped=!1,this.error=null}function b(a){var b,c=this,d=!1,e=!0,f=!1;return x(function(){if(c.disposed)throw new Error("Object disposed");e||a++;var g,h=!1;if(a>=c.buffer.length){if(!c.stopped)try{h=c.source.moveNext(),h&&(g=c.source.getCurrent())}catch(i){c.stopped=!0,c.error=i,c.source.dispose(),d=!0}if(c.stopped){if(c.error)throw c.buffer&&c.buffer.done(a+1),f=!0,c.error;return c.buffer&&c.buffer.done(a+1),f=!0,!1}h&&c.buffer.push(g)}else h=!0;return h?(b=c.buffer.get(a),e=!1,!0):(c.buffer&&c.buffer.done(a+1),f=!0,!1)},function(){return b},function(){f&&c.buffer&&c.buffer.done(a)})}return inherits(a,r),a.prototype.getEnumerator=function(){if(this.disposed)throw new Error("Object disposed");var a=this.buffer.length;return this.buffer.readerCount++,b.call(this,a)},a.prototype.dispose=function(){this.disposed||(this.source.dispose(),this.source=null,this.buffer.clear(),this.buffer=null,this.disposed=!0)},a}();s.publish=function(a){var b=this;return a?new r(function(){return a(b.publish()).getEnumerator()}):new A(b.getEnumerator())};var B=k.prototype;B.done=d,B.push=function(a){this.list[this.length++]=a},B.clear=function(){this.list=[],this.length=0},B.get=function(a){return this.list[a]};var C=function(){function a(a,b){this.source=a,this.buffer=b,this.stopped=!1,this.error=null,this.disposed=!1}return inherits(a,r),a.prototype.getEnumerator=function(){if(this.disposed)throw new Error("Object disposed");var a,b=0,c=this,d=!1,e=!0,f=!1;return x(function(){if(c.disposed)throw new Error("Object disposed");e||b++;var g,h=!1;if(b>=c.buffer.length){if(!c.stopped)try{h=c.source.moveNext(),h&&(g=c.source.getCurrent())}catch(i){c.stopped=!0,c.error=i,c.source.dispose(),d=!0}if(c.stopped){if(c.error)throw c.buffer&&c.buffer.done(b+1),f=!0,c.error;return c.buffer&&c.buffer.done(b+1),f=!0,!1}h&&c.buffer.push(g)}else h=!0;return h?(a=c.buffer.get(b),e=!1,!0):(c.buffer&&c.buffer.done(b+1),f=!0,!1)},function(){return a},function(){f&&c.buffer&&c.buffer.done(b)})},a.prototype.dispose=function(){this.disposed||(this.source.dispose(),this.source=null,this.buffer.clear(),this.buffer=null,this.disposed=!0)},a}();s.memoize=function(){var a=this;return 0===arguments.length?new C(a.getEnumerator(),new k):1===arguments.length&&"function"==typeof arguments[0]?new r(function(){return arguments[1](a.memoize()).getEnumerator()}):1===arguments.length&&"number"==typeof arguments[0]?new C(a.getEnumerator(),new j(arguments[0])):new r(function(){return arguments[1](a.memoize(arguments[0])).getEnumerator()})},r.throwException=function(a){return new r(function(){return x(function(){throw a},d)})};var D=r.defer=function(a){return new r(function(){var b;return x(function(){return b||(b=a().getEnumerator()),b.moveNext()},function(){return b.getCurrent()},function(){b.dispose()})})};r.generate=function(a,b,c,d){return new r(function(){var e,f,g=!1;return x(function(){if(g){if(e=c(e),!b(e))return!1}else e=a,g=!0;return f=d(e),!0},function(){return f})})},r.using=function(a,b){return new r(function(){var c,d,e,f=!0;return x(function(){return f&&(e=a(),d=b(e).getEnumerator(),f=!1),d.moveNext()?(c=d.getCurrent(),!0):!1},function(){return c},function(){d&&d.dispose(),e&&e.dispose()})})},s.doAction=function(a,b,c){var e,f,g,h=this;return"object"==typeof a?(e=l(a.onNext,a),f=l(a.onError,a),g=l(a.onCompleted,a)):(e=a,f=b||d,g=c||d),new r(function(){var a,b;return x(function(){a||(a=h.getEnumerator());try{if(!a.moveNext())return g(),!1;b=a.getCurrent()}catch(a){throw f(a),a}return e(b),!0},function(){return b},function(){a&&a.dispose()})})},s.bufferWithCount=function(a,b){var c=this;return null==b&&(b=a),new r(function(){var d,e,f=[],g=0;return x(function(){for(d||(d=c.getEnumerator());;){if(!d.moveNext())return f.length>0?(e=r.fromArray(f.shift()),!0):!1;0===g%b&&f.push([]);for(var h=0,i=f.length;i>h;h++)f[h].push(d.getCurrent());if(f.length>0&&f[0].length===a)return e=r.fromArray(f.shift()),++g,!0;++g}},function(){return e},function(){d.dispose()})})},s.ignoreElements=function(){var a=this;return new r(function(){var b;return x(function(){for(b=a.getEnumerator();b.moveNext(););return!1},function(){throw new Error("Operation is not valid due to the current state of the object.")},function(){b.dispose()})})},s.distinctBy=function(a,b){b||(b=g);var c=this;return new r(function(){var d,e,f=[];return x(function(){for(e||(e=c.getEnumerator());;){if(!e.moveNext())return!1;var g=e.getCurrent(),i=a(g);if(-1===h.call(f,i,b))return f.push(g),d=g,!0}},function(){return d},function(){e&&e.dispose()})})},s.distinctUntilChanged=function(a,b){a||(a=e),b||(b=g);var c=this;return new r(function(){var d,e,f,g;return x(function(){for(e||(e=c.getEnumerator());;){if(!e.moveNext())return!1;var h=e.getCurrent(),i=a(h),j=!1;if(g&&(j=b(f,i)),!g||!j)return d=h,f=i,g=!0,!0}},function(){return d},function(){e&&e.dispose()})})},s.expand=function(a){var b=this;return new r(function(){var c,d,e=[b];return x(function(){for(;;){if(!d){if(0===e.length)return!1;d=e.shift().getEnumerator()}if(d.moveNext())return c=d.getCurrent(),e.push(a(c)),!0;d.dispose(),d=null}},function(){return c},function(){d&&d.dispose()})})},s.startWith=function(){return t(v(q.call(arguments)),this)},s.scan=function(){var a=1===arguments.length?n:m;return a.apply(this,arguments)},s.takeLast=function(a){var b=this;return new r(function(){var c,d,e;return x(function(){if(d||(d=b.getEnumerator()),!e)for(e=[];d.moveNext();)e.push(d.getCurrent()),e.length>a&&e.shift();return 0===e.length?!1:(c=e.shift(),!0)},function(){return c},function(){d&&d.dispose()})})},s.skipLast=function(a){var b=this;return new r(function(){var c,d,e=[];return x(function(){for(d||(d=b.getEnumerator());;){if(!d.moveNext())return!1;if(e.push(d.getCurrent()),e.length>a)return c=e.shift(),!0}},function(){return c},function(){d&&d.dispose()})})},s.repeat=function(a){var b=this;return w(0,a).selectMany(function(){return b})},s.catchException=function(a){if(0===arguments.length)return E(this);if("function"==typeof a)return o(this,a);var b=q.call(arguments);return b.unshift(this),E.apply(null,b)};var E=r.catchException=function(){var a=r.fromArray(arguments);return new r(function(){var b,c,d,e;return x(function(){for(b||(b=a.getEnumerator());;){for(;;){if(!c){if(!b.moveNext()){if(e)throw e;return!1}e=null,c=b.getCurrent().getEnumerator()}var f,g;try{f=c.moveNext(),g=c.getCurrent()}catch(h){e=h,c.dispose(),c=null;break}if(!f){c.dispose(),c=null;break}return d=g,!0}if(null==e)break}},function(){return d},function(){c&&c.dispose(),b&&b.dispose()})})};s.finallyDo=function(a){var b=this;return new r(function(){var c,d=!1;return x(function(){e||(e=b.getEnumerator());var c;try{return c=e.moveNext(),c?c:(a(),d=!0,!1)}catch(e){throw a(),d=!0,e}},function(){return c.getCurrent()},function(){!d&&a(),c&&c.dispose()})})},s.onErrorResumeNext=function(a){return F.apply(null,[this,a])};var F=r.onErrorResumeNext=function(){var a=arguments;return new r(function(){var b,c,d=0;return x(function(){for(;d<a.length;){c||(c=a[d].getEnumerator());try{var e=c.moveNext();if(e)return b=c.getCurrent(),!0}catch(f){}c.dispose(),c=null,d++}return!1},function(){return b},function(){c&&c.dispose()})})};s.retry=function(a){var b=this;return new r(function(){var c,d,e=a,f=null!=a;return x(function(){for(d||(d=b.getEnumerator());;)try{return d.moveNext()?(c=d.getCurrent(),!0):!1}catch(a){if(f&&0===--e)throw a;d=b.getEnumerator(),error=null}},function(){return c},function(){d.dispose()})})};var G=r.whileDo=function(a,b){return w(b).takeWhile(a).selectMany(e)};return r.ifThen=function(a,b,c){return c||(c=u()),D(function(){return a()?b:c})},r.doWhile=function(a,b){return a.concat(G(b,a))},r.cases=function(a,b,c){return c||(c=u()),D(function(){var d=b[a()];return d||(d=c),d})},r.forIn=function(a,b){return a.select(b)},c});